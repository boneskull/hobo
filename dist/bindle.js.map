{"version":3,"sources":["../src/bindle.js"],"names":[],"mappings":";;;;;;;;wBAEoB,UAAU;;;;yBACd,YAAY;;;;sBACT,QAAQ;;;;uBACP,SAAS;;;;kBACT,MAAM;;qBACR,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;AAP3B,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASN,IAAM,QAAQ,GAAG;AACtB,IAAE,EAAE,SAAS;AACb,SAAO,EAAE,IAAI;CACd,CAAC;;;;;;;;;UAHW,QAAQ;;;;UAAR,QAAQ;;;QAAR,QAAQ;AAKrB,IAAM,MAAM,GAAG,OAAO,CAAC;AACrB,MAAI,EAAE,QAAQ;CACf,CAAC,CACC,OAAO,CAAC,KAAK,CAAC,CACd,IAAI,CAAC,SAAS,IAAI,GAAG;AACpB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;;AAEjE,SAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CACvB,IAAI,CAAC,UAAC,MAAM,EAAK;AAChB,QAAI,CAAC,MAAM,EAAE;AACX,aAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACtC,cAAM,CAAC,MAAM,EAAE,CACZ,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CACnB,GAAG,CAAC,YAAM;AACT,cAAI,CAAC,SAAS,EAAE,CACb,IAAI,CAAC,OAAO,CAAC,CAAC;SAClB,CAAC,CAAC;OACN,CAAC,CAAC;KACJ;GACF,CAAC,UACK,CAAC,IAAI,CAAC,CAAC;CACjB,CAAC,CAAC;;;;;;;;;;;;;;;;qBAEU,MAAM","file":"bindle.js","sourcesContent":["'use strict';\n\nimport Promise from 'bluebird';\nimport git from 'simple-git';\nimport domain from 'domain';\nimport stampit from 'stampit';\nimport {isGit} from './fs';\nimport Store from './store';\n\nexport const defaults = {\n  id: 'default',\n  dirpath: null\n};\n\nconst Bindle = stampit({\n  refs: defaults\n})\n  .compose(Store)\n  .init(function init() {\n    const _git = this._git = Promise.promisifyAll(git(this.dirpath));\n\n    return isGit(this.dirpath)\n      .then((result) => {\n        if (!result) {\n          return new Promise((resolve, reject) => {\n            domain.create()\n              .on('error', reject)\n              .run(() => {\n                _git.initAsync()\n                  .then(resolve);\n              });\n          });\n        }\n      })\n      .return(this);\n  });\n\nexport default Bindle;\n"]}